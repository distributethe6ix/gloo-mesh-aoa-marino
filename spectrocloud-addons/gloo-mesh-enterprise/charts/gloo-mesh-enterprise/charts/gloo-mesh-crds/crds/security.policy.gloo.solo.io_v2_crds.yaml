# Code generated by skv2. DO NOT EDIT.

apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    crd.solo.io/specHash: 43c1850adb867528
    crd.solo.io/version: 2.0.0
  labels:
    app: gloo-mesh-crds
    app.kubernetes.io/name: gloo-mesh-crds
  name: accesspolicies.security.policy.gloo.solo.io
spec:
  group: security.policy.gloo.solo.io
  names:
    kind: AccessPolicy
    listKind: AccessPolicyList
    plural: accesspolicies
    singular: accesspolicy
  scope: Namespaced
  versions:
  - name: v2
    schema:
      openAPIV3Schema:
        properties:
          spec:
            description: |-
              AccessPolicy is used to define how a destination service is granted. Specifically it describes
              both how clients should be authenticated and authorized to access the service.
              Refer to [this link](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS)
              for further details about cross origin resource sharing.
              AccessPolicies are applied at the *Destination* level.
            properties:
              applyToDestinations:
                description: |-
                  select the destinations where the policy will be applied
                  if left empty, will apply to all destinations in the workspace.
                items:
                  properties:
                    kind:
                      description: the kind of destination being selected. defaults
                        to Kubernetes Service.
                      enum:
                      - SERVICE
                      - VIRTUAL_DESTINATION
                      - EXTERNAL_SERVICE
                      type: string
                    port:
                      description: |-
                        the port on the Destination which receives traffic.
                        Not required if the Destination only exposes a single port.
                      oneOf:
                      - not:
                          anyOf:
                          - required:
                            - number
                          - required:
                            - name
                      - required:
                        - number
                      - required:
                        - name
                      properties:
                        name:
                          description: the name of the port on the destination objects
                            being targeted.
                          type: string
                        number:
                          description: the number of the port on the destination objects
                            being targeted.
                          maximum: 4294967295
                          minimum: 0
                          type: integer
                      type: object
                    selector:
                      description: selector used to match destination objects by their
                        metadata
                      properties:
                        cluster:
                          description: |-
                            Only select objects in the matching cluster. If the field is omitted, Gloo Mesh will select
                            matching objects across all clusters available in the parent object's workspace.
                          type: string
                        labels:
                          additionalProperties:
                            type: string
                          description: labels matching those of the object
                          type: object
                        name:
                          description: |-
                            Only select objects with the matching name. If the field is omitted, Gloo Mesh will select
                            matching objects with any name available in the parent object's workspace.
                          type: string
                        namespace:
                          description: |-
                            Only select objects in the matching namespace. If the field is omitted, Gloo Mesh will select
                            matching objects across all namespaces available in the parent object's workspace.
                          type: string
                        workspace:
                          description: |-
                            Only select objects in the given workspace. If the field is omitted, Gloo Mesh will select
                            matching objects across all workspaces available in the parent object's workspace.
                          type: string
                      type: object
                  type: object
                type: array
              config:
                description: The details of the access policy to apply to the selected
                  destinations.
                properties:
                  authn:
                    description: specify how clients will be authenticated to the
                      destination.
                    properties:
                      tlsMode:
                        description: |-
                          specify the type of TLS policy that will be enforced on clients connecting to the destination.
                          note that if service isolation is enabled for the workspace, this field will always be treated as 'STRICT'.
                        enum:
                        - DISABLE
                        - PERMISSIVE
                        - STRICT
                        type: string
                    type: object
                  authz:
                    description: specify how clients will be authorized to access
                      the destination.
                    properties:
                      allowedClients:
                        description: the set of client identities that will be permitted
                          to access the destination.
                        items:
                          properties:
                            requestIdentityMatcher:
                              description: |-
                                Select identities based on properties of the request. If multiple fields are set, they are ANDed together.
                                More information about the individual values can be found here: https://istio.io/latest/docs/reference/config/security/authorization-policy/#Source
                              properties:
                                notRequestPrincipals:
                                  description: Optional. A list of identities to negative
                                    match the request identity.
                                  items:
                                    type: string
                                  type: array
                                requestPrincipals:
                                  description: |-
                                    Optional. A list of identities to match the request identity ("iss/sub" from the JWT).
                                               If omitted all request identity values will be accepted.
                                  items:
                                    type: string
                                  type: array
                              type: object
                            serviceAccountSelector:
                              description: select kubernetes service accounts as identities
                              properties:
                                cluster:
                                  description: |-
                                    Only select objects in the matching cluster. If the field is omitted, Gloo Mesh will select
                                    matching objects across all clusters available in the parent object's workspace.
                                  type: string
                                labels:
                                  additionalProperties:
                                    type: string
                                  description: labels matching those of the object
                                  type: object
                                name:
                                  description: |-
                                    Only select objects with the matching name. If the field is omitted, Gloo Mesh will select
                                    matching objects with any name available in the parent object's workspace.
                                  type: string
                                namespace:
                                  description: |-
                                    Only select objects in the matching namespace. If the field is omitted, Gloo Mesh will select
                                    matching objects across all namespaces available in the parent object's workspace.
                                  type: string
                                workspace:
                                  description: |-
                                    Only select objects in the given workspace. If the field is omitted, Gloo Mesh will select
                                    matching objects across all workspaces available in the parent object's workspace.
                                  type: string
                              type: object
                          type: object
                        type: array
                      allowedMethods:
                        description: |-
                          Optional. A list of HTTP methods to allow (e.g., "GET", "POST").
                                         It is ignored in gRPC case because the value is always "POST".
                                         If not specified, allows any method.
                        items:
                          type: string
                        type: array
                      allowedPaths:
                        description: |-
                          Optional. A list of HTTP paths or gRPC methods to allow.
                                         gRPC methods must be presented as fully-qualified name in the form of
                                         "/packageName.serviceName/methodName" and are case sensitive.
                                         Exact match, prefix match, and suffix match are supported for paths.
                                         For example, the path "/books/review" matches
                                         "/books/review" (exact match), "*books/" (suffix match), or "/books*" (prefix match).

                                         If not specified, allow any path.
                        items:
                          type: string
                        type: array
                    type: object
                  trimProxyConfig:
                    description: |-
                      When enabled, proxy config will be trimmed to eliminate unnecessary config updates.
                      In Istio this will be implemented using the Sidecar resource.
                      This will be enabled by default, must be explicitly turned off via `trimProxyConfig: false`.
                    nullable: true
                    type: boolean
                type: object
            type: object
          status:
            description: reflects the status of the AccessPolicy
            properties:
              observedGeneration:
                description: |-
                  The most recent generation observed in the the object's metadata.
                  If the `observedGeneration` does not match `metadata.generation`, Gloo Mesh has not processed the most
                  recent version of this object.
                format: int64
                type: integer
              state:
                description: Whether the resource has been accepted as valid and processed
                  in the Gloo Mesh config translation.
                enum:
                - PENDING
                - ACCEPTED
                - INVALID
                - WARNING
                - FAILED
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    crd.solo.io/specHash: 4071f4a46503400d
    crd.solo.io/version: 2.0.0
  labels:
    app: gloo-mesh-crds
    app.kubernetes.io/name: gloo-mesh-crds
  name: corspolicies.security.policy.gloo.solo.io
spec:
  group: security.policy.gloo.solo.io
  names:
    kind: CORSPolicy
    listKind: CORSPolicyList
    plural: corspolicies
    singular: corspolicy
  scope: Namespaced
  versions:
  - name: v2
    schema:
      openAPIV3Schema:
        properties:
          spec:
            description: |-
              CORSPolicy is used to set a Cross-Origin Resource Sharing policy (CORS) for requests matching selected routes.
              Refer to [this link](https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS
              for further details about cross origin resource sharing.
              CORSPolicies are applied at the *Route* level.
            properties:
              applyToRoutes:
                description: |-
                  Select the routes where the policy will be applied.
                  If left empty, will apply to all routes in the workspace.
                items:
                  oneOf:
                  - not:
                      anyOf:
                      - required:
                        - route
                      - required:
                        - withDestinations
                  - required:
                    - route
                  - required:
                    - withDestinations
                  properties:
                    route:
                      description: |-
                        select routes based on their labels.
                        these labels can be used to match route tables or individual routes within route tables.
                      properties:
                        cluster:
                          description: |-
                            Only select objects in the matching cluster. If the field is omitted, Gloo Mesh will select
                            matching objects across all clusters available in the parent object's workspace.
                          type: string
                        labels:
                          additionalProperties:
                            type: string
                          description: labels matching those of the object
                          type: object
                        name:
                          description: |-
                            Only select objects with the matching name. If the field is omitted, Gloo Mesh will select
                            matching objects with any name available in the parent object's workspace.
                          type: string
                        namespace:
                          description: |-
                            Only select objects in the matching namespace. If the field is omitted, Gloo Mesh will select
                            matching objects across all namespaces available in the parent object's workspace.
                          type: string
                        workspace:
                          description: |-
                            Only select objects in the given workspace. If the field is omitted, Gloo Mesh will select
                            matching objects across all workspaces available in the parent object's workspace.
                          type: string
                      type: object
                    withDestinations:
                      description: |-
                        select routes with `forwardTo` actions based on their destinations.
                        this can be used apply policy to routes regardless of
                        their labels
                      properties:
                        kind:
                          description: the kind of destination being selected. defaults
                            to Kubernetes Service.
                          enum:
                          - SERVICE
                          - VIRTUAL_DESTINATION
                          - EXTERNAL_SERVICE
                          type: string
                        port:
                          description: |-
                            the port on the Destination which receives traffic.
                            Not required if the Destination only exposes a single port.
                          oneOf:
                          - not:
                              anyOf:
                              - required:
                                - number
                              - required:
                                - name
                          - required:
                            - number
                          - required:
                            - name
                          properties:
                            name:
                              description: the name of the port on the destination
                                objects being targeted.
                              type: string
                            number:
                              description: the number of the port on the destination
                                objects being targeted.
                              maximum: 4294967295
                              minimum: 0
                              type: integer
                          type: object
                        selector:
                          description: selector used to match destination objects
                            by their metadata
                          properties:
                            cluster:
                              description: |-
                                Only select objects in the matching cluster. If the field is omitted, Gloo Mesh will select
                                matching objects across all clusters available in the parent object's workspace.
                              type: string
                            labels:
                              additionalProperties:
                                type: string
                              description: labels matching those of the object
                              type: object
                            name:
                              description: |-
                                Only select objects with the matching name. If the field is omitted, Gloo Mesh will select
                                matching objects with any name available in the parent object's workspace.
                              type: string
                            namespace:
                              description: |-
                                Only select objects in the matching namespace. If the field is omitted, Gloo Mesh will select
                                matching objects across all namespaces available in the parent object's workspace.
                              type: string
                            workspace:
                              description: |-
                                Only select objects in the given workspace. If the field is omitted, Gloo Mesh will select
                                matching objects across all workspaces available in the parent object's workspace.
                              type: string
                          type: object
                      type: object
                  type: object
                type: array
              config:
                description: The details of the CORS policy to apply to the selected
                  routes.
                properties:
                  allowCredentials:
                    description: |-
                      Indicates whether the caller is allowed to send the actual request
                      (not the preflight) using credentials. Translates to the
                      `Access-Control-Allow-Credentials` header.
                    nullable: true
                    type: boolean
                  allowHeaders:
                    description: |-
                      List of HTTP headers that can be used when requesting the
                      resource. Serialized to the `Access-Control-Allow-Headers` header.
                    items:
                      type: string
                    type: array
                  allowMethods:
                    description: |-
                      List of HTTP methods allowed to access the resource. The content will
                      be serialized to the `Access-Control-Allow-Methods` header.
                    items:
                      type: string
                    type: array
                  allowOrigins:
                    description: String patterns that match allowed origins. An origin
                      is allowed if any of the string matchers match.
                    items:
                      oneOf:
                      - not:
                          anyOf:
                          - required:
                            - exact
                          - required:
                            - prefix
                          - required:
                            - regex
                          - required:
                            - suffix
                      - required:
                        - exact
                      - required:
                        - prefix
                      - required:
                        - regex
                      - required:
                        - suffix
                      properties:
                        exact:
                          description: Exact string match.
                          type: string
                        ignoreCase:
                          description: If true, indicates the exact/prefix/suffix
                            matching should be case insensitive. This has no effect
                            for the regex match.
                          type: boolean
                        prefix:
                          description: Prefix-based match.
                          type: string
                        regex:
                          description: ECMAscript style regex-based match.
                          type: string
                        suffix:
                          description: Suffix-based match.
                          type: string
                      type: object
                    type: array
                  exposeHeaders:
                    description: |-
                      A list of HTTP headers that browsers are allowed to
                      access. Serialized to the `Access-Control-Expose-Headers` header.
                    items:
                      type: string
                    type: array
                  maxAge:
                    description: |-
                      Specify how long the results of a preflight request can be
                      cached. Serialized to the `Access-Control-Max-Age` header.
                    type: string
                type: object
            type: object
          status:
            description: Reflects the status of the CORSPolicy.
            properties:
              observedGeneration:
                description: |-
                  The most recent generation observed in the the object's metadata.
                  If the `observedGeneration` does not match `metadata.generation`, Gloo Mesh has not processed the most
                  recent version of this object.
                format: int64
                type: integer
              state:
                description: Whether the resource has been accepted as valid and processed
                  in the Gloo Mesh config translation.
                enum:
                - PENDING
                - ACCEPTED
                - INVALID
                - WARNING
                - FAILED
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    crd.solo.io/specHash: 8f78df22f326ee8d
    crd.solo.io/version: 2.0.0
  labels:
    app: gloo-mesh-crds
    app.kubernetes.io/name: gloo-mesh-crds
  name: csrfpolicies.security.policy.gloo.solo.io
spec:
  group: security.policy.gloo.solo.io
  names:
    kind: CSRFPolicy
    listKind: CSRFPolicyList
    plural: csrfpolicies
    singular: csrfpolicy
  scope: Namespaced
  versions:
  - name: v2
    schema:
      openAPIV3Schema:
        properties:
          spec:
            description: |-
              CSRFPolicy is used to set safeguard to prevent CSRF (cross-site request forgery) attacks in requests matching selected routes.
              CSRFPolicies are applied at the *Route* level.
            properties:
              applyToRoutes:
                description: |-
                  select the routes where the policy will be applied
                  if left empty, will apply to all routes in the workspace.
                items:
                  oneOf:
                  - not:
                      anyOf:
                      - required:
                        - route
                      - required:
                        - withDestinations
                  - required:
                    - route
                  - required:
                    - withDestinations
                  properties:
                    route:
                      description: |-
                        select routes based on their labels.
                        these labels can be used to match route tables or individual routes within route tables.
                      properties:
                        cluster:
                          description: |-
                            Only select objects in the matching cluster. If the field is omitted, Gloo Mesh will select
                            matching objects across all clusters available in the parent object's workspace.
                          type: string
                        labels:
                          additionalProperties:
                            type: string
                          description: labels matching those of the object
                          type: object
                        name:
                          description: |-
                            Only select objects with the matching name. If the field is omitted, Gloo Mesh will select
                            matching objects with any name available in the parent object's workspace.
                          type: string
                        namespace:
                          description: |-
                            Only select objects in the matching namespace. If the field is omitted, Gloo Mesh will select
                            matching objects across all namespaces available in the parent object's workspace.
                          type: string
                        workspace:
                          description: |-
                            Only select objects in the given workspace. If the field is omitted, Gloo Mesh will select
                            matching objects across all workspaces available in the parent object's workspace.
                          type: string
                      type: object
                    withDestinations:
                      description: |-
                        select routes with `forwardTo` actions based on their destinations.
                        this can be used apply policy to routes regardless of
                        their labels
                      properties:
                        kind:
                          description: the kind of destination being selected. defaults
                            to Kubernetes Service.
                          enum:
                          - SERVICE
                          - VIRTUAL_DESTINATION
                          - EXTERNAL_SERVICE
                          type: string
                        port:
                          description: |-
                            the port on the Destination which receives traffic.
                            Not required if the Destination only exposes a single port.
                          oneOf:
                          - not:
                              anyOf:
                              - required:
                                - number
                              - required:
                                - name
                          - required:
                            - number
                          - required:
                            - name
                          properties:
                            name:
                              description: the name of the port on the destination
                                objects being targeted.
                              type: string
                            number:
                              description: the number of the port on the destination
                                objects being targeted.
                              maximum: 4294967295
                              minimum: 0
                              type: integer
                          type: object
                        selector:
                          description: selector used to match destination objects
                            by their metadata
                          properties:
                            cluster:
                              description: |-
                                Only select objects in the matching cluster. If the field is omitted, Gloo Mesh will select
                                matching objects across all clusters available in the parent object's workspace.
                              type: string
                            labels:
                              additionalProperties:
                                type: string
                              description: labels matching those of the object
                              type: object
                            name:
                              description: |-
                                Only select objects with the matching name. If the field is omitted, Gloo Mesh will select
                                matching objects with any name available in the parent object's workspace.
                              type: string
                            namespace:
                              description: |-
                                Only select objects in the matching namespace. If the field is omitted, Gloo Mesh will select
                                matching objects across all namespaces available in the parent object's workspace.
                              type: string
                            workspace:
                              description: |-
                                Only select objects in the given workspace. If the field is omitted, Gloo Mesh will select
                                matching objects across all workspaces available in the parent object's workspace.
                              type: string
                          type: object
                      type: object
                  type: object
                type: array
              config:
                description: The details of the CSRF policy to apply to the selected
                  routes.
                properties:
                  additionalOrigins:
                    description: |-
                      Specifies additional source origins that will be allowed in addition to
                      the destination origin.
                    items:
                      oneOf:
                      - not:
                          anyOf:
                          - required:
                            - exact
                          - required:
                            - prefix
                          - required:
                            - regex
                          - required:
                            - suffix
                      - required:
                        - exact
                      - required:
                        - prefix
                      - required:
                        - regex
                      - required:
                        - suffix
                      properties:
                        exact:
                          description: Exact string match.
                          type: string
                        ignoreCase:
                          description: If true, indicates the exact/prefix/suffix
                            matching should be case insensitive. This has no effect
                            for the regex match.
                          type: boolean
                        prefix:
                          description: Prefix-based match.
                          type: string
                        regex:
                          description: ECMAscript style regex-based match.
                          type: string
                        suffix:
                          description: Suffix-based match.
                          type: string
                      type: object
                    type: array
                  filterEnabled:
                    description: Specifies that CSRF policies will be evaluated, tracked
                      and enforced.
                    type: boolean
                  percentage:
                    description: |-
                      Specifies the % of requests for which the CSRF filter is enabled or when shadow mode is enabled the % of requests
                      evaluated and tracked, but not enforced.

                      If filter_enabled or shadow_enabled is true.
                      Envoy will lookup the runtime key to get the percentage of requests to filter.

                      .. note:: This field defaults to 100
                    nullable: true
                    type: number
                  shadowEnabled:
                    description: |-
                      Specifies that CSRF policies will be evaluated and tracked, but not enforced.

                      This is intended to be used when ``filter_enabled`` is false and will be ignored otherwise.
                    type: boolean
                type: object
            type: object
          status:
            description: reflects the status of the CSRFPolicy
            properties:
              observedGeneration:
                description: |-
                  The most recent generation observed in the the object's metadata.
                  If the `observedGeneration` does not match `metadata.generation`, Gloo Mesh has not processed the most
                  recent version of this object.
                format: int64
                type: integer
              state:
                description: Whether the resource has been accepted as valid and processed
                  in the Gloo Mesh config translation.
                enum:
                - PENDING
                - ACCEPTED
                - INVALID
                - WARNING
                - FAILED
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    crd.solo.io/specHash: 51f9240505b5fff4
    crd.solo.io/version: 2.0.0
  labels:
    app: gloo-mesh-crds
    app.kubernetes.io/name: gloo-mesh-crds
  name: extauthpolicies.security.policy.gloo.solo.io
spec:
  group: security.policy.gloo.solo.io
  names:
    kind: ExtAuthPolicy
    listKind: ExtAuthPolicyList
    plural: extauthpolicies
    singular: extauthpolicy
  scope: Namespaced
  versions:
  - name: v2
    schema:
      openAPIV3Schema:
        properties:
          spec:
            description: |-
              ExtAuthPolicy is used to enforce external authorization/authentication of traffic matching selected routes or arriving at selected destinations.
              All ExtAuthPolicies in a workspace require an ExtAuthServer to in order to function.
              If no ExtAuthServer is specified, a default configuration will be used.
              ExtAuthRoutePolicies can be applied at both the *Route* and *Destination* levels.
              Default is to apply policy to all destinations.
            properties:
              applyToDestinations:
                description: |-
                  Select the destinations where the policy will be applied.
                  Default behavior if no selectors are specified is to apply to all destinations in the workspace.
                  If left empty and the route selector is set, no extauth policy on destinations will be applied.
                items:
                  properties:
                    kind:
                      description: the kind of destination being selected. defaults
                        to Kubernetes Service.
                      enum:
                      - SERVICE
                      - VIRTUAL_DESTINATION
                      - EXTERNAL_SERVICE
                      type: string
                    port:
                      description: |-
                        the port on the Destination which receives traffic.
                        Not required if the Destination only exposes a single port.
                      oneOf:
                      - not:
                          anyOf:
                          - required:
                            - number
                          - required:
                            - name
                      - required:
                        - number
                      - required:
                        - name
                      properties:
                        name:
                          description: the name of the port on the destination objects
                            being targeted.
                          type: string
                        number:
                          description: the number of the port on the destination objects
                            being targeted.
                          maximum: 4294967295
                          minimum: 0
                          type: integer
                      type: object
                    selector:
                      description: selector used to match destination objects by their
                        metadata
                      properties:
                        cluster:
                          description: |-
                            Only select objects in the matching cluster. If the field is omitted, Gloo Mesh will select
                            matching objects across all clusters available in the parent object's workspace.
                          type: string
                        labels:
                          additionalProperties:
                            type: string
                          description: labels matching those of the object
                          type: object
                        name:
                          description: |-
                            Only select objects with the matching name. If the field is omitted, Gloo Mesh will select
                            matching objects with any name available in the parent object's workspace.
                          type: string
                        namespace:
                          description: |-
                            Only select objects in the matching namespace. If the field is omitted, Gloo Mesh will select
                            matching objects across all namespaces available in the parent object's workspace.
                          type: string
                        workspace:
                          description: |-
                            Only select objects in the given workspace. If the field is omitted, Gloo Mesh will select
                            matching objects across all workspaces available in the parent object's workspace.
                          type: string
                      type: object
                  type: object
                type: array
              applyToRoutes:
                description: |-
                  Select the routes where the policy will be applied.
                  If left empty, no extauth policy will be applied to any routes in the workspace.
                items:
                  oneOf:
                  - not:
                      anyOf:
                      - required:
                        - route
                      - required:
                        - withDestinations
                  - required:
                    - route
                  - required:
                    - withDestinations
                  properties:
                    route:
                      description: |-
                        select routes based on their labels.
                        these labels can be used to match route tables or individual routes within route tables.
                      properties:
                        cluster:
                          description: |-
                            Only select objects in the matching cluster. If the field is omitted, Gloo Mesh will select
                            matching objects across all clusters available in the parent object's workspace.
                          type: string
                        labels:
                          additionalProperties:
                            type: string
                          description: labels matching those of the object
                          type: object
                        name:
                          description: |-
                            Only select objects with the matching name. If the field is omitted, Gloo Mesh will select
                            matching objects with any name available in the parent object's workspace.
                          type: string
                        namespace:
                          description: |-
                            Only select objects in the matching namespace. If the field is omitted, Gloo Mesh will select
                            matching objects across all namespaces available in the parent object's workspace.
                          type: string
                        workspace:
                          description: |-
                            Only select objects in the given workspace. If the field is omitted, Gloo Mesh will select
                            matching objects across all workspaces available in the parent object's workspace.
                          type: string
                      type: object
                    withDestinations:
                      description: |-
                        select routes with `forwardTo` actions based on their destinations.
                        this can be used apply policy to routes regardless of
                        their labels
                      properties:
                        kind:
                          description: the kind of destination being selected. defaults
                            to Kubernetes Service.
                          enum:
                          - SERVICE
                          - VIRTUAL_DESTINATION
                          - EXTERNAL_SERVICE
                          type: string
                        port:
                          description: |-
                            the port on the Destination which receives traffic.
                            Not required if the Destination only exposes a single port.
                          oneOf:
                          - not:
                              anyOf:
                              - required:
                                - number
                              - required:
                                - name
                          - required:
                            - number
                          - required:
                            - name
                          properties:
                            name:
                              description: the name of the port on the destination
                                objects being targeted.
                              type: string
                            number:
                              description: the number of the port on the destination
                                objects being targeted.
                              maximum: 4294967295
                              minimum: 0
                              type: integer
                          type: object
                        selector:
                          description: selector used to match destination objects
                            by their metadata
                          properties:
                            cluster:
                              description: |-
                                Only select objects in the matching cluster. If the field is omitted, Gloo Mesh will select
                                matching objects across all clusters available in the parent object's workspace.
                              type: string
                            labels:
                              additionalProperties:
                                type: string
                              description: labels matching those of the object
                              type: object
                            name:
                              description: |-
                                Only select objects with the matching name. If the field is omitted, Gloo Mesh will select
                                matching objects with any name available in the parent object's workspace.
                              type: string
                            namespace:
                              description: |-
                                Only select objects in the matching namespace. If the field is omitted, Gloo Mesh will select
                                matching objects across all namespaces available in the parent object's workspace.
                              type: string
                            workspace:
                              description: |-
                                Only select objects in the given workspace. If the field is omitted, Gloo Mesh will select
                                matching objects across all workspaces available in the parent object's workspace.
                              type: string
                          type: object
                      type: object
                  type: object
                type: array
              config:
                description: The details of the external auth policy to apply to the
                  selected routes and destinations.
                oneOf:
                - not:
                    anyOf:
                    - required:
                      - disable
                    - required:
                      - glooAuth
                    - required:
                      - customAuth
                - required:
                  - disable
                - required:
                  - glooAuth
                - required:
                  - customAuth
                properties:
                  customAuth:
                    description: Use this field if you are running your own custom
                      extauth server. The destination service must be configured to
                      use a custom ext auth service via a ExtAuthDestinationPolicy.
                    properties:
                      contextExtensions:
                        additionalProperties:
                          type: string
                        description: |-
                          When a request matches the route or on which this configuration is applied,
                          Gloo Mesh will add the given context_extensions to the request that is sent to the external authorization server.
                          This allows the server to base the auth decision on metadata that you define on the source of the request.

                          This attribute is analogous to Envoy's config.filter.http.ext_authz.v2.CheckSettings. See the official
                          [Envoy documentation](https://www.envoyproxy.io/docs/envoy/latest/api-v2/config/filter/http/ext_authz/v2/ext_authz.proto.html?highlight=ext_authz#config-filter-http-ext-authz-v2-checksettings)
                          for more details.
                        type: object
                    type: object
                  disable:
                    description: Set to true to disable auth on the route.
                    type: boolean
                  glooAuth:
                    description: Configure the selected route or destination with
                      auth options provided by the Gloo Mesh Ext Auth service. The
                      Ext Auth Service can be specified  must be configured to use
                      a Gloo Ext Auth service via a ExtAuthDestinationPolicy.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  server:
                    description: |-
                      reference to the ExtAuthServer to use for this policy.
                      Currently routes on a single gateway must share a single ExtAuthServer.
                      If none is provided, the default Gloo ExtAuthServer will be used.
                    properties:
                      cluster:
                        description: the cluster of the object. if the field is omitted,
                          Gloo Mesh will attempt to use the same cluster as the parent
                          object containing this reference.
                        type: string
                      name:
                        description: the name of the object
                        type: string
                      namespace:
                        description: the namespace of the object. if the field is
                          omitted, Gloo Mesh will attempt to use the same namespace
                          as the parent object containing this reference.
                        type: string
                    type: object
                type: object
            type: object
          status:
            description: reflects the status of the ExtAuthPolicy
            properties:
              observedGeneration:
                description: |-
                  The most recent generation observed in the the object's metadata.
                  If the `observedGeneration` does not match `metadata.generation`, Gloo Mesh has not processed the most
                  recent version of this object.
                format: int64
                type: integer
              state:
                description: Whether the resource has been accepted as valid and processed
                  in the Gloo Mesh config translation.
                enum:
                - PENDING
                - ACCEPTED
                - INVALID
                - WARNING
                - FAILED
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
