# Code generated by skv2. DO NOT EDIT.

apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    crd.solo.io/specHash: 34298027018ba956
    crd.solo.io/version: 2.0.0
  labels:
    app: gloo-mesh-crds
    app.kubernetes.io/name: gloo-mesh-crds
  name: failoverpolicies.resilience.policy.gloo.solo.io
spec:
  group: resilience.policy.gloo.solo.io
  names:
    kind: FailoverPolicy
    listKind: FailoverPolicyList
    plural: failoverpolicies
    singular: failoverpolicy
  scope: Namespaced
  versions:
  - name: v2
    schema:
      openAPIV3Schema:
        properties:
          spec:
            description: |-
              FailoverPolicy is used to enable failover routing for traffic being sent to selected destinations.
              When traffic is being routed to a backing service within a selected virtual destination, if that backing service is detected as being in an unhealthy state, traffic will be re-routed to another healthy backing service by locality as specified in the FailoverPolicy config.
              FailoverPolicy can be used to reroute traffic across clusters when the local instance of a destination service fails. This requires that the backing destinations of the selected virtual destination belong to meshes in the same TrustDomain.
              FailoverPolicies are applied at the *Destination* level.

              Note: If an OutlierDetectionPolicy is not configured for the same destinations,
              we will apply our default.
            properties:
              applyToDestinations:
                description: |-
                  select the virtual destinations where the policy will be applied
                  if left empty, will apply to all destinations in the workspace.
                items:
                  properties:
                    kind:
                      description: the kind of destination being selected. defaults
                        to Kubernetes Service.
                      enum:
                      - SERVICE
                      - VIRTUAL_DESTINATION
                      - EXTERNAL_SERVICE
                      type: string
                    port:
                      description: |-
                        the port on the Destination which receives traffic.
                        Not required if the Destination only exposes a single port.
                      oneOf:
                      - not:
                          anyOf:
                          - required:
                            - number
                          - required:
                            - name
                      - required:
                        - number
                      - required:
                        - name
                      properties:
                        name:
                          description: the name of the port on the destination objects
                            being targeted.
                          type: string
                        number:
                          description: the number of the port on the destination objects
                            being targeted.
                          maximum: 4294967295
                          minimum: 0
                          type: integer
                      type: object
                    selector:
                      description: selector used to match destination objects by their
                        metadata
                      properties:
                        cluster:
                          description: |-
                            Only select objects in the matching cluster. If the field is omitted, Gloo Mesh will select
                            matching objects across all clusters available in the parent object's workspace.
                          type: string
                        labels:
                          additionalProperties:
                            type: string
                          description: labels matching those of the object
                          type: object
                        name:
                          description: |-
                            Only select objects with the matching name. If the field is omitted, Gloo Mesh will select
                            matching objects with any name available in the parent object's workspace.
                          type: string
                        namespace:
                          description: |-
                            Only select objects in the matching namespace. If the field is omitted, Gloo Mesh will select
                            matching objects across all namespaces available in the parent object's workspace.
                          type: string
                        workspace:
                          description: |-
                            Only select objects in the given workspace. If the field is omitted, Gloo Mesh will select
                            matching objects across all workspaces available in the parent object's workspace.
                          type: string
                      type: object
                  type: object
                type: array
              config:
                description: |-
                  The details of the failover policy to apply to the selected virtual destinations.

                  You can exclude this if you wish to enable the locality load balancer
                  settings without mappings.
                properties:
                  localityMappings:
                    description: |-
                      Mappings between localities to provide failover for traffic
                      across regions, zones, and subzones.

                      You can exclude this if you wish to enable the locality load balancer
                      settings without mappings.
                    items:
                      properties:
                        from:
                          description: Originating locality of the client workload.
                          properties:
                            region:
                              description: The locality's region.
                              type: string
                            subZone:
                              description: (Optional) The locality's sub-zone.
                              type: string
                            zone:
                              description: (Optional) The locality's zone.
                              type: string
                          type: object
                        to:
                          description: The list of Destination localities that can
                            be routed to if the instance local to the client workload
                            is not available.
                          items:
                            properties:
                              region:
                                description: The locality's region.
                                type: string
                              subZone:
                                description: (Optional) The locality's sub-zone.
                                type: string
                              weight:
                                description: |-
                                  (Optional) Weight for destination locality. All weights must add up to 100.
                                  If not provided, we will determine the weight based on other
                                  destination locality weights.
                                maximum: 4294967295
                                minimum: 0
                                nullable: true
                                type: integer
                              zone:
                                description: (Optional) The locality's zone.
                                type: string
                            type: object
                          type: array
                      type: object
                    type: array
                type: object
            type: object
          status:
            description: reflects the status of the FailoverPolicy
            properties:
              observedGeneration:
                description: |-
                  The most recent generation observed in the the object's metadata.
                  If the `observedGeneration` does not match `metadata.generation`, Gloo Mesh has not processed the most
                  recent version of this object.
                format: int64
                type: integer
              state:
                description: Whether the resource has been accepted as valid and processed
                  in the Gloo Mesh config translation.
                enum:
                - PENDING
                - ACCEPTED
                - INVALID
                - WARNING
                - FAILED
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    crd.solo.io/specHash: 774d0fdd6221c553
    crd.solo.io/version: 2.0.0
  labels:
    app: gloo-mesh-crds
    app.kubernetes.io/name: gloo-mesh-crds
  name: outlierdetectionpolicies.resilience.policy.gloo.solo.io
spec:
  group: resilience.policy.gloo.solo.io
  names:
    kind: OutlierDetectionPolicy
    listKind: OutlierDetectionPolicyList
    plural: outlierdetectionpolicies
    singular: outlierdetectionpolicy
  scope: Namespaced
  versions:
  - name: v2
    schema:
      openAPIV3Schema:
        properties:
          spec:
            description: |-
              OutlierDetectionPolicy is used to configure [outlier detection](https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/outlier) on the selected destinations.
              Specifying this field requires an empty `source_selector` because it must apply to all traffic.
              OutlierDetectionPolicies are applied at the *Destination* level.
            properties:
              applyToDestinations:
                description: |-
                  select the destinations where the policy will be applied
                  if left empty, will apply to all destinations in the workspace.
                items:
                  properties:
                    kind:
                      description: the kind of destination being selected. defaults
                        to Kubernetes Service.
                      enum:
                      - SERVICE
                      - VIRTUAL_DESTINATION
                      - EXTERNAL_SERVICE
                      type: string
                    port:
                      description: |-
                        the port on the Destination which receives traffic.
                        Not required if the Destination only exposes a single port.
                      oneOf:
                      - not:
                          anyOf:
                          - required:
                            - number
                          - required:
                            - name
                      - required:
                        - number
                      - required:
                        - name
                      properties:
                        name:
                          description: the name of the port on the destination objects
                            being targeted.
                          type: string
                        number:
                          description: the number of the port on the destination objects
                            being targeted.
                          maximum: 4294967295
                          minimum: 0
                          type: integer
                      type: object
                    selector:
                      description: selector used to match destination objects by their
                        metadata
                      properties:
                        cluster:
                          description: |-
                            Only select objects in the matching cluster. If the field is omitted, Gloo Mesh will select
                            matching objects across all clusters available in the parent object's workspace.
                          type: string
                        labels:
                          additionalProperties:
                            type: string
                          description: labels matching those of the object
                          type: object
                        name:
                          description: |-
                            Only select objects with the matching name. If the field is omitted, Gloo Mesh will select
                            matching objects with any name available in the parent object's workspace.
                          type: string
                        namespace:
                          description: |-
                            Only select objects in the matching namespace. If the field is omitted, Gloo Mesh will select
                            matching objects across all namespaces available in the parent object's workspace.
                          type: string
                        workspace:
                          description: |-
                            Only select objects in the given workspace. If the field is omitted, Gloo Mesh will select
                            matching objects across all workspaces available in the parent object's workspace.
                          type: string
                      type: object
                  type: object
                type: array
              config:
                description: The details of the OutlierDetectionPolicy to apply to
                  the selected destinations.
                properties:
                  baseEjectionTime:
                    description: 'The minimum ejection duration. Format: `1h`/`1m`/`1s`/`1ms`.
                      Must be >= `1ms`. A default will be used if not set.'
                    type: string
                  consecutiveErrors:
                    description: The number of errors before a host is ejected from
                      the connection pool. A default will be used if not set.
                    maximum: 4294967295
                    minimum: 0
                    type: integer
                  interval:
                    description: 'The time interval between ejection sweep analysis.
                      Format: `1h`/`1m`/`1s`/`1ms`. Must be >= `1ms`. A default will
                      be used if not set.'
                    type: string
                  maxEjectionPercent:
                    description: |-
                      The maximum percentage of hosts that can be ejected from the load balancing pool.
                      At least one host will be ejected regardless of the value. Must be between 0 and 100. A default will be used if not set.
                    maximum: 4294967295
                    minimum: 0
                    type: integer
                type: object
            type: object
          status:
            description: reflects the status of the OutlierDetectionPolicy
            properties:
              observedGeneration:
                description: |-
                  The most recent generation observed in the the object's metadata.
                  If the `observedGeneration` does not match `metadata.generation`, Gloo Mesh has not processed the most
                  recent version of this object.
                format: int64
                type: integer
              state:
                description: Whether the resource has been accepted as valid and processed
                  in the Gloo Mesh config translation.
                enum:
                - PENDING
                - ACCEPTED
                - INVALID
                - WARNING
                - FAILED
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    crd.solo.io/specHash: 694059c02e8413f3
    crd.solo.io/version: 2.0.0
  labels:
    app: gloo-mesh-crds
    app.kubernetes.io/name: gloo-mesh-crds
  name: faultinjectionpolicies.resilience.policy.gloo.solo.io
spec:
  group: resilience.policy.gloo.solo.io
  names:
    kind: FaultInjectionPolicy
    listKind: FaultInjectionPolicyList
    plural: faultinjectionpolicies
    singular: faultinjectionpolicy
  scope: Namespaced
  versions:
  - name: v2
    schema:
      openAPIV3Schema:
        properties:
          spec:
            description: |-
              FaultInjectionPolicy is used to inject faults (latency and errors) into requests sent through the mesh.
              Fault specification is part of a VirtualService rule. Faults include
              aborting the Http request from downstream service, and/or delaying
              proxying of requests. A fault rule MUST HAVE delay or abort or both.
              FaultInjectionPolicies are applied at the *Route* level.
            properties:
              applyToRoutes:
                description: |-
                  select the routes where the policy will be applied
                  if left empty, will apply to all routes in the workspace.
                items:
                  oneOf:
                  - not:
                      anyOf:
                      - required:
                        - route
                      - required:
                        - withDestinations
                  - required:
                    - route
                  - required:
                    - withDestinations
                  properties:
                    route:
                      description: |-
                        select routes based on their labels.
                        these labels can be used to match route tables or individual routes within route tables.
                      properties:
                        cluster:
                          description: |-
                            Only select objects in the matching cluster. If the field is omitted, Gloo Mesh will select
                            matching objects across all clusters available in the parent object's workspace.
                          type: string
                        labels:
                          additionalProperties:
                            type: string
                          description: labels matching those of the object
                          type: object
                        name:
                          description: |-
                            Only select objects with the matching name. If the field is omitted, Gloo Mesh will select
                            matching objects with any name available in the parent object's workspace.
                          type: string
                        namespace:
                          description: |-
                            Only select objects in the matching namespace. If the field is omitted, Gloo Mesh will select
                            matching objects across all namespaces available in the parent object's workspace.
                          type: string
                        workspace:
                          description: |-
                            Only select objects in the given workspace. If the field is omitted, Gloo Mesh will select
                            matching objects across all workspaces available in the parent object's workspace.
                          type: string
                      type: object
                    withDestinations:
                      description: |-
                        select routes with `forwardTo` actions based on their destinations.
                        this can be used apply policy to routes regardless of
                        their labels
                      properties:
                        kind:
                          description: the kind of destination being selected. defaults
                            to Kubernetes Service.
                          enum:
                          - SERVICE
                          - VIRTUAL_DESTINATION
                          - EXTERNAL_SERVICE
                          type: string
                        port:
                          description: |-
                            the port on the Destination which receives traffic.
                            Not required if the Destination only exposes a single port.
                          oneOf:
                          - not:
                              anyOf:
                              - required:
                                - number
                              - required:
                                - name
                          - required:
                            - number
                          - required:
                            - name
                          properties:
                            name:
                              description: the name of the port on the destination
                                objects being targeted.
                              type: string
                            number:
                              description: the number of the port on the destination
                                objects being targeted.
                              maximum: 4294967295
                              minimum: 0
                              type: integer
                          type: object
                        selector:
                          description: selector used to match destination objects
                            by their metadata
                          properties:
                            cluster:
                              description: |-
                                Only select objects in the matching cluster. If the field is omitted, Gloo Mesh will select
                                matching objects across all clusters available in the parent object's workspace.
                              type: string
                            labels:
                              additionalProperties:
                                type: string
                              description: labels matching those of the object
                              type: object
                            name:
                              description: |-
                                Only select objects with the matching name. If the field is omitted, Gloo Mesh will select
                                matching objects with any name available in the parent object's workspace.
                              type: string
                            namespace:
                              description: |-
                                Only select objects in the matching namespace. If the field is omitted, Gloo Mesh will select
                                matching objects across all namespaces available in the parent object's workspace.
                              type: string
                            workspace:
                              description: |-
                                Only select objects in the given workspace. If the field is omitted, Gloo Mesh will select
                                matching objects across all workspaces available in the parent object's workspace.
                              type: string
                          type: object
                      type: object
                  type: object
                type: array
              config:
                description: The details of the fault injection policy to apply to
                  the selected routes.
                properties:
                  abort:
                    description: Abort the request and return the specified error
                      code back to traffic source.
                    properties:
                      httpStatus:
                        description: Required. HTTP status code to use to abort the
                          request.
                        format: int32
                        type: integer
                      percentage:
                        description: Percentage of requests to be aborted. Values
                          range between 0 and 100. If omitted all requests will be
                          aborted.
                        nullable: true
                        type: number
                    type: object
                  delay:
                    description: |-
                      Indicate the amount of delay in seconds.
                      The optional _percentage_ field can be used to only delay a certain
                      percentage of requests. If left unspecified, all request will be delayed.
                    properties:
                      fixedDelay:
                        description: 'Required. Add a delay of a fixed duration before
                          sending the request. Format: `1h`/`1m`/`1s`/`1ms`. MUST
                          be >=1ms.'
                        type: string
                      percentage:
                        description: Percentage of requests on which the delay will
                          be injected. Values range between 0 and 100. If omitted
                          all requests will be delayed.
                        nullable: true
                        type: number
                    type: object
                type: object
            type: object
          status:
            description: reflects the status of the FaultInjectionPolicy
            properties:
              observedGeneration:
                description: |-
                  The most recent generation observed in the the object's metadata.
                  If the `observedGeneration` does not match `metadata.generation`, Gloo Mesh has not processed the most
                  recent version of this object.
                format: int64
                type: integer
              state:
                description: Whether the resource has been accepted as valid and processed
                  in the Gloo Mesh config translation.
                enum:
                - PENDING
                - ACCEPTED
                - INVALID
                - WARNING
                - FAILED
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    crd.solo.io/specHash: 8574222eb0c7df74
    crd.solo.io/version: 2.0.0
  labels:
    app: gloo-mesh-crds
    app.kubernetes.io/name: gloo-mesh-crds
  name: retrytimeoutpolicies.resilience.policy.gloo.solo.io
spec:
  group: resilience.policy.gloo.solo.io
  names:
    kind: RetryTimeoutPolicy
    listKind: RetryTimeoutPolicyList
    plural: retrytimeoutpolicies
    singular: retrytimeoutpolicy
  scope: Namespaced
  versions:
  - name: v2
    schema:
      openAPIV3Schema:
        properties:
          spec:
            description: |-
              RetryTimeoutPolicy is used to add automatic retries and timeouts to requests matching selected routes.
              RetryTimeoutPolicies are applied at the *Route* level.
            properties:
              applyToRoutes:
                description: |-
                  select the routes where the policy will be applied
                  if left empty, will apply to all routes in the workspace.
                items:
                  oneOf:
                  - not:
                      anyOf:
                      - required:
                        - route
                      - required:
                        - withDestinations
                  - required:
                    - route
                  - required:
                    - withDestinations
                  properties:
                    route:
                      description: |-
                        select routes based on their labels.
                        these labels can be used to match route tables or individual routes within route tables.
                      properties:
                        cluster:
                          description: |-
                            Only select objects in the matching cluster. If the field is omitted, Gloo Mesh will select
                            matching objects across all clusters available in the parent object's workspace.
                          type: string
                        labels:
                          additionalProperties:
                            type: string
                          description: labels matching those of the object
                          type: object
                        name:
                          description: |-
                            Only select objects with the matching name. If the field is omitted, Gloo Mesh will select
                            matching objects with any name available in the parent object's workspace.
                          type: string
                        namespace:
                          description: |-
                            Only select objects in the matching namespace. If the field is omitted, Gloo Mesh will select
                            matching objects across all namespaces available in the parent object's workspace.
                          type: string
                        workspace:
                          description: |-
                            Only select objects in the given workspace. If the field is omitted, Gloo Mesh will select
                            matching objects across all workspaces available in the parent object's workspace.
                          type: string
                      type: object
                    withDestinations:
                      description: |-
                        select routes with `forwardTo` actions based on their destinations.
                        this can be used apply policy to routes regardless of
                        their labels
                      properties:
                        kind:
                          description: the kind of destination being selected. defaults
                            to Kubernetes Service.
                          enum:
                          - SERVICE
                          - VIRTUAL_DESTINATION
                          - EXTERNAL_SERVICE
                          type: string
                        port:
                          description: |-
                            the port on the Destination which receives traffic.
                            Not required if the Destination only exposes a single port.
                          oneOf:
                          - not:
                              anyOf:
                              - required:
                                - number
                              - required:
                                - name
                          - required:
                            - number
                          - required:
                            - name
                          properties:
                            name:
                              description: the name of the port on the destination
                                objects being targeted.
                              type: string
                            number:
                              description: the number of the port on the destination
                                objects being targeted.
                              maximum: 4294967295
                              minimum: 0
                              type: integer
                          type: object
                        selector:
                          description: selector used to match destination objects
                            by their metadata
                          properties:
                            cluster:
                              description: |-
                                Only select objects in the matching cluster. If the field is omitted, Gloo Mesh will select
                                matching objects across all clusters available in the parent object's workspace.
                              type: string
                            labels:
                              additionalProperties:
                                type: string
                              description: labels matching those of the object
                              type: object
                            name:
                              description: |-
                                Only select objects with the matching name. If the field is omitted, Gloo Mesh will select
                                matching objects with any name available in the parent object's workspace.
                              type: string
                            namespace:
                              description: |-
                                Only select objects in the matching namespace. If the field is omitted, Gloo Mesh will select
                                matching objects across all namespaces available in the parent object's workspace.
                              type: string
                            workspace:
                              description: |-
                                Only select objects in the given workspace. If the field is omitted, Gloo Mesh will select
                                matching objects across all workspaces available in the parent object's workspace.
                              type: string
                          type: object
                      type: object
                  type: object
                type: array
              config:
                description: The details of the retry/timeout policy to apply to the
                  selected routes.
                properties:
                  requestTimeout:
                    description: Set a timeout on requests matched on the selected
                      routes.
                    type: string
                  retries:
                    description: Set a retry policy on requests matched on the selected
                      routes.
                    properties:
                      attempts:
                        description: |-
                          Number of retries for a given request
                          The interval between retries will be determined automatically (25ms+). When request
                          `timeout` of the [HTTP route](https://istio.io/docs/reference/config/networking/virtual-service/#HTTPRoute)
                          or `per_try_timeout` is configured, the actual number of retries attempted also depends on
                          the specified request `timeout` and `per_try_timeout` values.
                          Defaults to 2 retries.
                        maximum: 2147483647
                        minimum: -2147483648
                        nullable: true
                        type: integer
                      perTryTimeout:
                        description: |-
                          Timeout per retry attempt for a given request. Format: `1h`/`1m`/`1s`/`1ms`. *Must be >= 1ms*.
                          Default is same value as request `timeout` of
                          the [HTTP route](https://istio.io/docs/reference/config/networking/virtual-service/#HTTPRoute),
                          which means no timeout.
                        type: string
                      retryOn:
                        description: |-
                          Specifies the conditions under which retry takes place.
                          One or more policies can be specified using a ‘,’ delimited list.
                          If `retry_on` specifies a valid HTTP status, it will be added to retriable_status_codes retry policy.
                          See the [retry policies](https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/router_filter#x-envoy-retry-on)
                          and [gRPC retry policies](https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/router_filter#x-envoy-retry-grpc-on) for more details.
                        type: string
                      retryRemoteLocalities:
                        description: |-
                          Flag to specify whether the retries should retry to other localities.
                          Defaults to false.
                          See the [retry plugin configuration](https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/http/http_connection_management#retry-plugin-configuration) for more details.
                        nullable: true
                        type: boolean
                    type: object
                type: object
            type: object
          status:
            description: reflects the status of the RetryTimeoutPolicy
            properties:
              observedGeneration:
                description: |-
                  The most recent generation observed in the the object's metadata.
                  If the `observedGeneration` does not match `metadata.generation`, Gloo Mesh has not processed the most
                  recent version of this object.
                format: int64
                type: integer
              state:
                description: Whether the resource has been accepted as valid and processed
                  in the Gloo Mesh config translation.
                enum:
                - PENDING
                - ACCEPTED
                - INVALID
                - WARNING
                - FAILED
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
